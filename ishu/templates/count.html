<style>
    input {
        width: 250px;
        height: 40px;
        font-size: 25px;
    }
    h1 {
        font-family: monospace;
        font-size: 30px;
        margin-top: 50px;
    }
    button {
        width: 150px;
        height: 30px;
        font-size: 15px;
        ont-family: monospace;
    }
</style>
<center>
<h1><a href="/">HOME</a></h1><br><br>
<h1>LOCALITY: <h1 id="test"></h1><br><br><input id="local"></h1><br><br><button onclick="ChartShow()">Show Graph</button><br><br><button onclick="Re()">Clear</button><br><br><br><br><br>
</center>

<canvas id="myChart"></canvas>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script>
function Re() {
    location.reload();
}

console.log(local);
{% comment %} $.ajax({
    method: "GET",
    url: endpoint,
    success: function(data){
        lab = data.label
        if (local == 'kharghar') {
            defaultData = data.kharghar
        }
        ChartShow()
        console.log(data)
    },
    error: function(error_data){
        console.log(error_data)
    }
}) {% endcomment %}

function ChartShow() {
    var endpoint = '/chart';
    var local = document.getElementById("local").value;
    document.getElementById("test").innerHTML = local;
    console.log(local);
    var defaultData = [];
    var lab = [];
    $.ajax({
    method: "GET",
    url: endpoint,
    success: function(data){
        lab = data.label
        if (local == "kharghar") {
            defaultData = data.kharghar
        }
        else if (local == "thane") {
            defaultData = data.thane
        }
        else if (local == "dadar") {
            defaultData = data.dadar
        }
        else if (local == "andheri") {
            defaultData = data.andheri
        }
        Show(lab, defaultData);
    },
    error: function(error_data){
        console.log(error_data)
    }
    })
}

function Show(lab, defaultData) {
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: lab,
            datasets: [{
                label: '# of Votes',
                data: defaultData,
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                xAxes:[{ stacked: true }],
                yAxes: [{
                    stacked: true,
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
        
    });
}
</script>

<style>
    
</style>

{% comment %} {% for i in lis %}
    <h2>{{ i }}</h2>
{% endfor %} {% endcomment %}

<div id="clear">
    <canvas id="myChart" width="200" height="200"></canvas>
</div>